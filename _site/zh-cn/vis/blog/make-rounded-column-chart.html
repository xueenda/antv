<!DOCTYPE html><html><head><meta charset=UTF-8><meta name=keywords content=""><meta name=description content=""><meta name=viewport content="width=device-width,initial-scale=1"><title>&#x73A9;&#x73A9; G2 &#x7CFB;&#x5217;&#x4E4B;&#x5706;&#x89D2;&#x77E9;&#x5F62; - AntV</title><link rel=icon href=https://gw.alipayobjects.com/os/antv/assets/favoricon.png type=image/x-icon><link rel=stylesheet href=https://gw.alipayobjects.com/os/antv/assets/lib/bootstrap-4.0.0-beta/bootstrap.min.css><link rel=stylesheet href=https://gw.alipayobjects.com/os/antv/assets/lib/bootstrap-4.0.0-beta/bootstrap-grid.min.css><link rel=stylesheet href=https://at.alicdn.com/t/font_470089_mjiz4j8t0ozuxr.css><link rel=stylesheet href=/assets/dist/3.0.0/common.css><link rel=stylesheet href=https://gw.alipayobjects.com/os/antv/assets/lib/highlight-9.12.0/solarized-light.css><link rel=stylesheet href=https://gw.alipayobjects.com/os/antv/assets/lib/tocbot-3.0.2/tocbot.css><link rel=stylesheet href=/assets/dist/3.0.0/blog.css></head><body class=template-blog><div style="display: none;"><img src=/assets/image/logo-with-text.svg alt=""> <img src=https://gw.alipayobjects.com/zos/rmsportal/bpKcpwimYnZMTarUxCEd.png alt=""></div><div id=google_translate_element style="position: fixed;
    top: 0;
    left: calc(50vw - 75px);
    z-index: 9999;"></div><script type=text/javascript>function googleTranslateElementInit() {
    new google.translate.TranslateElement({ pageLanguage: 'zh-cn', includedLanguages: 'en'}, 'google_translate_element');
  }</script><script type=text/javascript src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><header class="navbar navbar-expand-lg navbar-light"><a class=navbar-brand href=/zh-cn/index.html><img src=/assets/image/logo-with-text.svg alt=""> </a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarHeader aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarHeader><ul class="navbar-nav mr-auto mt-2 mt-lg-0 query-group"><span class=nav-separator></span><li class="nav-item dropdown" id=sub-product-navs><a href=# class="nav-item nav-link dropdown-toggle mr-md-2" data-toggle=dropdown aria-haspopup=true aria-expanded=true>&#x58A8;&#x8005;&#x5B66;&#x9662;</a><div class=dropdown-menu aria-labelledby=""><a href=/zh-cn/g2/3.x/index.html class=dropdown-item><span class=icon-container><img src=/assets/image/icon/g2.svg alt=""> </span>G2 </a><a href=/zh-cn/g6/1.x/index.html class=dropdown-item><span class=icon-container><img src=/assets/image/icon/g6.svg alt=""> </span>G6 </a><a href=/zh-cn/f2/3.x/index.html class=dropdown-item><span class=icon-container><img src=/assets/image/icon/f2.svg alt=""> </span>F2 </a><a href=/zh-cn/gallery/index.html class=dropdown-item><span class=icon-container><img src=/assets/image/icon/gallery.svg alt=""> </span>Gallery </a><a href=/zh-cn/vis/index.html class=dropdown-item><span class=icon-container><img src=/assets/image/icon/vis.svg alt=""> </span>&#x58A8;&#x8005;&#x5B66;&#x9662;</a></div></li><a id=btn-search class=nav-link><span class="iconfont icon-search"></span> </a><input id=query class=query type=text placeholder=&#x641C;&#x7D22;... aria-label=Search></ul><ul class="navbar-nav mt-2 mt-lg-0" id=sub-site-nav><a class="nav-link active" href=/zh-cn/vis/blog/index.html>&#x535A;&#x5BA2;</a> <a class=nav-link href=/zh-cn/vis/design/index.html>&#x8BBE;&#x8BA1;&#x539F;&#x5219;</a> <a class=nav-link href=/zh-cn/vis/chart/index.html>&#x56FE;&#x8868;&#x7528;&#x6CD5;</a> <a class=nav-link href=/zh-cn/vis/resource/index.html>&#x8D44;&#x6E90;</a> <a class=back2old-version href=http://antvis.github.io/ target=_blank><span class="btn border">&#x8FD4;&#x56DE;&#x65E7;&#x7248;</span></a></ul></div></header><div class=blog-container><div class=container><article><h1 id=_&#x73A9;&#x73A9;-G2-&#x7CFB;&#x5217;&#x4E4B;&#x5706;&#x89D2;&#x77E9;&#x5F62;><a href=#_&#x73A9;&#x73A9;-G2-&#x7CFB;&#x5217;&#x4E4B;&#x5706;&#x89D2;&#x77E9;&#x5F62; class=anchor></a>&#x73A9;&#x73A9; G2 &#x7CFB;&#x5217;&#x4E4B;&#x5706;&#x89D2;&#x77E9;&#x5F62;</h1><div class=author><img class=avatar width=20 height=20 src=/assets/image/members/zaifei.jpg alt=""> <span>&#x518D;&#x98DE;</span> <span class=float-right>2017-11-22</span></div><img class=landscape src=/assets/image/vis/blog/make-rounded-column-chart.jpg alt=""><h1 id=__&#x73A9;&#x73A9;-G2-&#x7CFB;&#x5217;&#x4E4B;&#x5706;&#x89D2;&#x77E9;&#x5F62;><a href=#__&#x73A9;&#x73A9;-G2-&#x7CFB;&#x5217;&#x4E4B;&#x5706;&#x89D2;&#x77E9;&#x5F62; class=anchor></a>&#x73A9;&#x73A9; G2 &#x7CFB;&#x5217;&#x4E4B;&#x5706;&#x89D2;&#x77E9;&#x5F62;</h1><p>&#x524D;&#x8A00;&#xFF1A;</p><blockquote><p>&#x603B;&#x6709;&#x4E00;&#x5929;&#x4F60;&#x7684;&#x68F1;&#x89D2;&#x4F1A;&#x88AB;&#x4E16;&#x754C;&#x78E8;&#x5E73;&#xFF0C;&#x4F60;&#x4F1A;&#x62D4;&#x6389;&#x8EAB;&#x4E0A;&#x7684;&#x523A;&#xFF0C;&#x4F60;&#x4F1A;&#x5B66;&#x7740;&#x5BF9;&#x8BA8;&#x538C;&#x7684;&#x4EBA;&#x5FAE;&#x7B11;&#xFF0C;&#x4F60;&#x4F1A;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x4E0D;&#x52A8;&#x58F0;&#x8272;&#x7684;&#x4EBA;&#x3002;</p></blockquote><p><code>2017-03-21 14:57</code>&#xFF0C;&#x4E54;&#x6797;&#x7AE5;&#x978B;&#x5728;&#x9489;&#x9489;&#x4E0A;&#x95EE;&#x4E86;&#x6211;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p><img src=https://gw.alipayobjects.com/zos/rmsportal/nePBJSIsCTjtUbHQHIJp.png style="width: 50%;"><p>&#x5706;&#x89D2;&#x77E9;&#x5F62;&#xFF0C;&#x4E0D;&#x7531;&#x5F97;&#x60F3;&#x8D77;&#x51E0;&#x5E74;&#x524D;&#x95F9;&#x5F97;&#x6CB8;&#x6CB8;&#x626C;&#x626C;&#x7684;&#x82F9;&#x679C;&#x5706;&#x89D2;&#x77E9;&#x5F62;&#x5916;&#x89C2;&#x8BBE;&#x8BA1;&#x4E13;&#x5229;&#x3002;</p><p><img src=https://gw.alipayobjects.com/zos/rmsportal/cOnJEshrFeILIcVIyLmH.png alt=image.png> <img src=https://gw.alipayobjects.com/zos/rmsportal/PCaIaDdbdfRjQXnrQssj.png alt=image.png></p><p>&#x4E0A;&#x9762;&#x53EA;&#x662F;&#x9898;&#x5916;&#x8BDD;&#x3002;&#x5728;&#x6784;&#x5EFA;&#x56FE;&#x8868;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x8BBE;&#x8BA1;&#x5E08;&#x7ECF;&#x5E38;&#x4F1A;&#x52A0;&#x5165;&#x4E00;&#x4E9B;&#x5C0F;&#x56FE;&#x5F62;&#x6765;&#x4FEE;&#x9970;&#x5176;&#x8BBE;&#x8BA1;&#xFF0C;&#x4F46;&#x8FD9;&#x5E76;&#x65E0;&#x8FDD;&#x548C;&#x611F;&#xFF0C;&#x6BD4;&#x5982;&#x5706;&#x89D2;&#x67F1;&#x72B6;&#x56FE;&#xFF08;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x5BF9;&#x4E8E;&#x539F;&#x59CB;&#x56FE;&#x8868;&#x8C03;&#x6574;&#x6700;&#x5C0F;&#x7684;&#x8BBE;&#x8BA1;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x53D8;&#x5316;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x662F;&#x4F7F;&#x5F97;&#x67F1;&#x72B6;&#x56FE;&#x9876;&#x90E8;&#x7F3A;&#x5C11;&#x4E00;&#x6761;&#x6709;&#x6548;&#x7684;&#x6C34;&#x5E73;&#x7EBF;&#xFF0C;&#x662F;&#x67F1;&#x72B6;&#x56FE;&#x4E4B;&#x95F4;&#x96BE;&#x4EE5;&#x6BD4;&#x8F83;&#xFF0C;&#x4F46;&#x662F;&#x5462;&#xFF0C;&#x8FD9;&#x4E2A;&#x7F3A;&#x70B9;&#x662F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5750;&#x6807;&#x8F74;&#x7684;&#x7F51;&#x683C;&#x7EBF;&#x6765;&#x63A9;&#x76D6;&#xFF0C;&#x4F7F;&#x67F1;&#x72B6;&#x56FE;&#x7684;&#x8868;&#x8FBE;&#x66F4;&#x6709;&#x6548;~ &#x6709;&#x6CA1;&#x6709;&#x4E00;&#x4E0B;&#x7406;&#x89E3;&#x4E86;&#x7F51;&#x683C;&#x7EBF;&#x7684;&#x5B58;&#x5728;&#x610F;&#x4E49;<img src=http://alipay-rmsdeploy-image.cn-hangzhou.alipay.aliyun-inc.com/skylark/attach/7819/22da42d3e934e135/image.png alt=image.png>&#xFF09;&#x3002;</p><p>&#x90A3;&#x4E48;&#x56DE;&#x5230;&#x4E54;&#x6797;&#x7684;&#x95EE;&#x9898;&#xFF0C; &#x5982;&#x4F55;&#x4F7F;&#x7528; G2 &#x6765;&#x7ED8;&#x5236;&#x5706;&#x89D2;&#x67F1;&#x72B6;&#x56FE;&#x5462;&#xFF1F;&#x76EE;&#x524D; G2 &#x9ED8;&#x8BA4;&#x7ED8;&#x5236;&#x51FA;&#x7684;&#x67F1;&#x72B6;&#x56FE;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p><img src=/assets/dist/3.0.0/g2/3.x/bar/basic-column.png><p>&#x5728; CSS &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E; <code>border-radius</code> &#x5C5E;&#x6027;&#x5F88;&#x65B9;&#x4FBF;&#x5F97;&#x8BBE;&#x7F6E;&#x5706;&#x89D2;&#xFF0C;&#x5176;&#x5B9E;&#x5BF9;&#x4E8E; G2 &#x7684;&#x5E95;&#x5C42;&#x7ED8;&#x5236;&#x5E93; G&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x4E3A; <code>rect</code> &#x8FD9;&#x4E2A; shape &#x63D0;&#x4F9B;&#x4E86; <code>radius</code> &#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x652F;&#x6301;&#x77E9;&#x5F62;&#x5706;&#x89D2;&#x7684;&#x7ED8;&#x5236;&#x3002;&#x4F46;&#x662F;&#x95EE;&#x9898;&#x6765;&#x4E86;&#xFF0C;G2 &#x5185;&#x90E8;&#x662F;&#x4F7F;&#x7528; path &#x8DEF;&#x5F84;&#x6765;&#x5B9E;&#x73B0;&#x77E9;&#x5F62;&#x7684;&#x7ED8;&#x5236;&#x7684;&#xFF0C;&#x90A3;&#x5C31;&#x65E0;&#x6CD5;&#x5F00;&#x5FC3;&#x5F97;&#x7B80;&#x7B80;&#x5355;&#x5355;&#x5F97;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E; <code>radius</code> &#x6765;&#x8BBE;&#x7F6E;&#x4E86;&#x3002;&#x3002;&#x3002;&#x90A3;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x6709;&#x529E;&#x6CD5;&#xFF0C; G2 &#x7684;&#x5F3A;&#x5927;&#x5C31;&#x5728;&#x4E8E;&#x53EA;&#x8981;&#x4F60;&#x6562;&#x60F3;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x5B9E;&#x73B0;&#x7684;&#x6269;&#x5C55;&#x80FD;&#x529B;&#xFF1A;<a href=/zh-cn/g2/3.x/tutorial/customize-shape.html>&#x81EA;&#x5B9A;&#x4E49; shape</a>&#x3002;</p><p>&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x4E0B;&#xFF0C;&#x5BF9;&#x4E8E; G2 &#x6765;&#x8BF4;&#xFF0C;&#x4E00;&#x4E2A;&#x77E9;&#x5F62;&#x662F;&#x5982;&#x4F55;&#x7ED8;&#x5236;&#x7684;&#xFF0C;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x77E9;&#x5F62;&#x7531;&#x56DB;&#x4E2A;&#x9876;&#x70B9;&#x7EC4;&#x6210;&#xFF0C;&#x5C06;&#x8FD9;&#x56DB;&#x4E2A;&#x9876;&#x70B9;&#x8FDE;&#x63A5;&#x5373;&#x53EF;&#xFF0C;&#x8FD9;&#x56DB;&#x4E2A;&#x9876;&#x70B9;&#x5373; G2 &#x4E2D;&#x7ED8;&#x5236;&#x6BCF;&#x79CD;&#x51E0;&#x4F55;&#x56FE;&#x5F62;&#x7684;&#x5173;&#x952E;&#x70B9;&#xFF0C;&#x4EE5;&#x77E9;&#x5F62;&#x4E3A;&#x4F8B;&#xFF0C;&#x5728; G2 &#x4E2D;&#x6211;&#x4EEC;&#x4ECE;&#x5DE6;&#x4E0B;&#x89D2;&#x4F5C;&#x4E3A;&#x8D77;&#x59CB;&#x70B9;&#xFF0C;&#x987A;&#x65F6;&#x9488;&#x9010;&#x70B9;&#x8FDE;&#x63A5;&#xFF1A;</p><p><img src=https://gw.alipayobjects.com/zos/rmsportal/KXIpcmLffzPfpjujKBGa.png alt=image.png></p><p>&#x5728;&#x81EA;&#x5B9A;&#x4E49; shape &#x7684;&#x63A5;&#x53E3;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x7ED8;&#x5236;&#x56FE;&#x5F62;&#x6240;&#x6709;&#x9700;&#x8981;&#x7684;&#x4FE1;&#x606F;&#xFF08;<a href=/zh-cn/g2/3.x/api/shape.html>&#x81EA;&#x5B9A;&#x4E49; Shape API</a>&#xFF09;&#xFF0C;&#x4E0B;&#x9762;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x5982;&#x4F55;&#x7ED8;&#x5236;&#x5706;&#x89D2;&#x77E9;&#x5F62;&#x5427;:</p><h2 id=_&#x5706;&#x89D2;&#x67F1;&#x72B6;&#x56FE;><a href=#_&#x5706;&#x89D2;&#x67F1;&#x72B6;&#x56FE; class=anchor><span class="iconfont icon-link"></span></a>&#x5706;&#x89D2;&#x67F1;&#x72B6;&#x56FE;</h2><div id=c1></div><p>&#x7ED8;&#x5236;&#x539F;&#x7406;&#x5982;&#x4E0B;&#x5982;&#x6240;&#x793A;&#xFF0C;G &#x7684; rect &#x7684;&#x8D77;&#x59CB;&#x70B9;&#x4E3A;&#x5DE6;&#x4E0A;&#x89D2;&#xFF0C;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684;&#x56DB;&#x4E2A;&#x5173;&#x952E;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6C42;&#x51FA;&#x77E9;&#x5F62;&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E; radius &#x5C5E;&#x6027;&#x5C31;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5E26;&#x5706;&#x89D2;&#x7684;&#x77E9;&#x5F62;&#x3002;</p><p><img src=https://gw.alipayobjects.com/zos/rmsportal/SXKsJpNFQXEHSPWmKuxS.png alt=image.png></p><p>&#x5173;&#x952E;&#x4EE3;&#x7801;&#xFF1A;</p><div class=highlight><pre>G2.Shape.registerShape(<span class=hljs-string>&apos;interval&apos;</span>, <span class=hljs-string>&apos;borderRadius&apos;</span>, {
  draw(cfg, container) {
    <span class=hljs-comment>/**
     * &#x67F1;&#x72B6;&#x56FE;&#x7531;&#x56DB;&#x4E2A;&#x70B9;&#x8FDE;&#x7EBF;&#x800C;&#x6210;
     * points[1] --- points[2]
     *    |              |
     * points[0] --- points[3]
    */</span>
    <span class=hljs-keyword>const</span> points = cfg.points;
    <span class=hljs-keyword>let</span> path = [];
    path.push([<span class=hljs-string>&apos;M&apos;</span>, points[<span class=hljs-number>0</span>].x, points[<span class=hljs-number>0</span>].y]);
    path.push([<span class=hljs-string>&apos;L&apos;</span>, points[<span class=hljs-number>1</span>].x, points[<span class=hljs-number>1</span>].y]);
    path.push([<span class=hljs-string>&apos;L&apos;</span>, points[<span class=hljs-number>2</span>].x, points[<span class=hljs-number>2</span>].y]);
    path.push([<span class=hljs-string>&apos;L&apos;</span>, points[<span class=hljs-number>3</span>].x, points[<span class=hljs-number>3</span>].y]);
    path.push(<span class=hljs-string>&apos;Z&apos;</span>);
    path = <span class=hljs-keyword>this</span>.parsePath(path); <span class=hljs-comment>// &#x5C06; 0 - 1 &#x8F6C;&#x5316;&#x4E3A;&#x753B;&#x5E03;&#x5750;&#x6807;</span>
    <span class=hljs-keyword>return</span> container.addShape(<span class=hljs-string>&apos;rect&apos;</span>, {
      <span class=hljs-attr>attrs</span>: {
        <span class=hljs-attr>x</span>: path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>], <span class=hljs-comment>// &#x77E9;&#x5F62;&#x8D77;&#x59CB;&#x70B9;&#x4E3A;&#x5DE6;&#x4E0A;&#x89D2;</span>
        y: path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>],
        <span class=hljs-attr>width</span>: path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>],
        <span class=hljs-attr>height</span>: path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>],
        <span class=hljs-attr>fill</span>: cfg.color,
        <span class=hljs-attr>radius</span>: (path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>]) / <span class=hljs-number>2</span>,
      }
    });
  },
});
</pre></div><p><strong>&#x7EBF;&#x4E0A;demo</strong>&#xFF1A;<a href="/zh-cn/g2/3.x/demo/other/rounded-column-chart.html?theme=default">&#x5706;&#x89D2;&#x67F1;&#x72B6;&#x56FE;</a></p><h2 id=_&#x5706;&#x89D2;&#x5806;&#x53E0;&#x67F1;&#x72B6;&#x56FE;><a href=#_&#x5706;&#x89D2;&#x5806;&#x53E0;&#x67F1;&#x72B6;&#x56FE; class=anchor><span class="iconfont icon-link"></span></a>&#x5706;&#x89D2;&#x5806;&#x53E0;&#x67F1;&#x72B6;&#x56FE;</h2><div id=c2></div><p>&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x7ED8;&#x5236;&#x4E0A;&#x4E0B;&#x5E26;&#x5706;&#x89D2;&#x7684;&#x5C42;&#x53E0;&#x67F1;&#x72B6;&#x56FE;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x601D;&#x8DEF;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x540C;&#x6837;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49; shape&#xFF0C;&#x5C06;&#x6700;&#x4E0A;&#x90E8;&#x77E9;&#x5F62;&#x7684; shape &#x6620;&#x5C04;&#x4E3A;&#x4E0A;&#x8FB9;&#x5E26;&#x5706;&#x89D2;&#x7684;&#x77E9;&#x5F62;&#xFF0C;&#x5C06;&#x6700;&#x5E95;&#x90E8;&#x7684;&#x77E9;&#x5F62;&#x6620;&#x5C04;&#x4E3A;&#x5E95;&#x8FB9;&#x5E26;&#x5706;&#x89D2;&#x7684;&#x77E9;&#x5F62;&#x3002;</p><p><img src=https://gw.alipayobjects.com/zos/rmsportal/YAeVeBGJWJuZzLUIOODv.png alt=image.png></p><p>&#x5173;&#x952E;&#x4EE3;&#x7801;&#xFF1A;</p><div class=highlight><pre><span class=hljs-comment>// &#x9876;&#x8FB9;&#x5E26;&#x5706;&#x89D2;</span>
Shape.registerShape(<span class=hljs-string>&apos;interval&apos;</span>, <span class=hljs-string>&apos;top&apos;</span>, {
  draw(cfg, container) {
    <span class=hljs-keyword>const</span> points = cfg.points;
    <span class=hljs-keyword>const</span> attrs = getFillAttrs(cfg);
    <span class=hljs-keyword>let</span> path = getRectPath(cfg.points);
    path = <span class=hljs-keyword>this</span>.parsePath(path); <span class=hljs-comment>// &#x5C06; 0 - 1 &#x7684;&#x503C;&#x8F6C;&#x6362;&#x4E3A;&#x753B;&#x5E03;&#x5750;&#x6807;</span>
    <span class=hljs-keyword>const</span> radius = (path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>]) / <span class=hljs-number>2</span>;
    <span class=hljs-keyword>const</span> temp = [];
    temp.push([<span class=hljs-string>&apos;M&apos;</span>, path[<span class=hljs-number>0</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>] + radius]);
    temp.push([<span class=hljs-string>&apos;A&apos;</span>, radius, radius, <span class=hljs-number>90</span>, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>] + radius, path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - radius, path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;A&apos;</span>, radius, radius, <span class=hljs-number>90</span>, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>] + radius]);
    temp.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>3</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>3</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;Z&apos;</span>]);
    <span class=hljs-keyword>return</span> container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: Util.mix(attrs, {
        <span class=hljs-attr>path</span>: temp,
      })
    });
  }
});
<span class=hljs-comment>// &#x5E95;&#x8FB9;&#x5E26;&#x5706;&#x89D2;</span>
Shape.registerShape(<span class=hljs-string>&apos;interval&apos;</span>, <span class=hljs-string>&apos;bottom&apos;</span>, {
  draw(cfg, container) {
    <span class=hljs-keyword>const</span> points = cfg.points;
    <span class=hljs-keyword>const</span> attrs = getFillAttrs(cfg);
    <span class=hljs-keyword>let</span> path = getRectPath(cfg.points);
    path = <span class=hljs-keyword>this</span>.parsePath(path);
    <span class=hljs-keyword>const</span> radius = (path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>]) / <span class=hljs-number>2</span>;
    <span class=hljs-keyword>const</span> temp = [];
    temp.push([<span class=hljs-string>&apos;M&apos;</span>, path[<span class=hljs-number>0</span>][<span class=hljs-number>1</span>] + radius, path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;A&apos;</span>, radius, radius, <span class=hljs-number>90</span>, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, path[<span class=hljs-number>0</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>] - radius]);
    temp.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>3</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>3</span>][<span class=hljs-number>2</span>] - radius]);
    temp.push([<span class=hljs-string>&apos;A&apos;</span>, radius, radius, <span class=hljs-number>90</span>, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, path[<span class=hljs-number>3</span>][<span class=hljs-number>1</span>] - radius, path[<span class=hljs-number>3</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;Z&apos;</span>]);
    <span class=hljs-keyword>return</span> container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: Util.mix(attrs, {
        <span class=hljs-attr>path</span>: temp,
      })
    });
  }
});

chart.intervalStack()
  .position(<span class=hljs-string>&apos;year*sales&apos;</span>)
  .color(<span class=hljs-string>&apos;type&apos;</span>)
  .size(<span class=hljs-number>35</span>)
  .shape(<span class=hljs-string>&apos;type&apos;</span>, <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>val</span>) </span>{
    <span class=hljs-keyword>if</span> (val === <span class=hljs-string>&apos;Profit&apos;</span>) { <span class=hljs-comment>// &#x9876;&#x90E8;&#x5706;&#x89D2;</span>
      <span class=hljs-keyword>return</span> <span class=hljs-string>&apos;bottom&apos;</span>;
    } <span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span> (val === <span class=hljs-string>&apos;Sales&apos;</span>) { <span class=hljs-comment>// &#x5E95;&#x90E8;&#x5706;&#x89D2;</span>
      <span class=hljs-keyword>return</span> <span class=hljs-string>&apos;top&apos;</span>;
    } <span class=hljs-keyword>else</span> {
      <span class=hljs-keyword>return</span>; <span class=hljs-comment>// &#x5176;&#x4ED6;&#x9ED8;&#x8BA4;</span>
    }
  });
</pre></div><p>&#x7EBF;&#x4E0A; demo: <a href=/zh-cn/g2/3.x/demo/other/rounded-stacked-column-chart.html>&#x5706;&#x89D2;&#x5806;&#x53E0;&#x67F1;&#x72B6;&#x56FE;</a></p><h2 id=_&#x66F4;&#x731B;&#x7684;&#xFF0C;&#x6E29;&#x5EA6;&#x8BA1;><a href=#_&#x66F4;&#x731B;&#x7684;&#xFF0C;&#x6E29;&#x5EA6;&#x8BA1; class=anchor><span class="iconfont icon-link"></span></a>&#x66F4;&#x731B;&#x7684;&#xFF0C;&#x6E29;&#x5EA6;&#x8BA1;</h2><div id=c3></div><div class=highlight><pre><span class=hljs-keyword>const</span> { Chart, Shape, Util } = G2;
<span class=hljs-keyword>const</span> { <span class=hljs-built_in>DataView</span> } = DataSet;
<span class=hljs-keyword>const</span> gapWidth = <span class=hljs-number>3</span>;
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>getFillAttrs</span>(<span class=hljs-params>cfg</span>) </span>{
  <span class=hljs-keyword>const</span> attrs = {
    <span class=hljs-attr>fill</span>: cfg.color,
    <span class=hljs-attr>fillOpacity</span>: cfg.opacity,
  };
  <span class=hljs-keyword>return</span> attrs;
}
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>getRectPath</span>(<span class=hljs-params>points</span>) </span>{
  <span class=hljs-keyword>const</span> path = [];
  <span class=hljs-keyword>for</span> (<span class=hljs-keyword>let</span> i = <span class=hljs-number>0</span>; i &lt; points.length; i++) {
    <span class=hljs-keyword>const</span> point = points[i];
    <span class=hljs-keyword>if</span> (point) {
      <span class=hljs-keyword>const</span> action = i === <span class=hljs-number>0</span> ? <span class=hljs-string>&apos;M&apos;</span> : <span class=hljs-string>&apos;L&apos;</span>;
      path.push([action, point.x, point.y]);
    }
  }
  <span class=hljs-keyword>const</span> first = points[<span class=hljs-number>0</span>];
  path.push([<span class=hljs-string>&apos;L&apos;</span>, first.x, first.y]);
  path.push([<span class=hljs-string>&apos;z&apos;</span>]);
  <span class=hljs-keyword>return</span> path;
}
Shape.registerShape(<span class=hljs-string>&apos;interval&apos;</span>, <span class=hljs-string>&apos;top&apos;</span>, {
  draw(cfg, container) {
    <span class=hljs-keyword>const</span> points = cfg.points;
    <span class=hljs-keyword>const</span> attrs = getFillAttrs(cfg);
    <span class=hljs-keyword>let</span> path = getRectPath(cfg.points);
    path = <span class=hljs-keyword>this</span>.parsePath(path); <span class=hljs-comment>// &#x5C06; 0 - 1 &#x7684;&#x503C;&#x8F6C;&#x6362;&#x4E3A;&#x753B;&#x5E03;&#x5750;&#x6807;</span>
    <span class=hljs-keyword>const</span> realInterval = container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: Util.mix(attrs, {
        path,
      }),
    });
    <span class=hljs-keyword>const</span> radius = (path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>]) / <span class=hljs-number>2</span>;
    <span class=hljs-keyword>const</span> temp = [];
    temp.push([<span class=hljs-string>&apos;M&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;A&apos;</span>, radius, radius, <span class=hljs-number>90</span>, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, (path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] + path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>]) / <span class=hljs-number>2</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>] - radius]);
    temp.push([<span class=hljs-string>&apos;A&apos;</span>, radius, radius, <span class=hljs-number>90</span>, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>]]);
    temp.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>]]);
    <span class=hljs-keyword>const</span> topShape = container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: {
        <span class=hljs-attr>path</span>: temp,
        <span class=hljs-attr>fill</span>: <span class=hljs-string>&apos;#fff&apos;</span>,
        <span class=hljs-attr>stroke</span>: <span class=hljs-string>&apos;#000&apos;</span>,
      },
    });
    <span class=hljs-keyword>return</span> realInterval;
  }
});
<span class=hljs-comment>// &#x4E2D;&#x95F4;&#x5E26;&#x8FB9;&#x7684;&#x77E9;&#x5F62;</span>
Shape.registerShape(<span class=hljs-string>&apos;interval&apos;</span>, <span class=hljs-string>&apos;other&apos;</span>, {
  draw(cfg, container) {
    <span class=hljs-keyword>const</span> points = cfg.points;
    <span class=hljs-keyword>const</span> attrs = getFillAttrs(cfg);
    <span class=hljs-keyword>let</span> path = getRectPath(cfg.points);
    path = <span class=hljs-keyword>this</span>.parsePath(path); <span class=hljs-comment>// &#x5C06; 0 - 1 &#x7684;&#x503C;&#x8F6C;&#x6362;&#x4E3A;&#x753B;&#x5E03;&#x5750;&#x6807;</span>
    <span class=hljs-keyword>const</span> intervalPath = [];
    intervalPath.push([<span class=hljs-string>&apos;M&apos;</span>, path[<span class=hljs-number>0</span>][<span class=hljs-number>1</span>] + gapWidth, path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>]]);
    intervalPath.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>] + gapWidth, path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>]]);
    intervalPath.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - gapWidth, path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>]]);
    intervalPath.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>3</span>][<span class=hljs-number>1</span>] - gapWidth, path[<span class=hljs-number>3</span>][<span class=hljs-number>2</span>]]);
    intervalPath.push([<span class=hljs-string>&apos;Z&apos;</span>]);
    <span class=hljs-keyword>const</span> intervalShape = container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: Util.mix(attrs, {
        <span class=hljs-attr>path</span>: intervalPath,
      }),
    });
    container.addShape(<span class=hljs-string>&apos;line&apos;</span>, {
      <span class=hljs-attr>attrs</span>: {
        <span class=hljs-attr>x1</span>: path[<span class=hljs-number>0</span>][<span class=hljs-number>1</span>],
        <span class=hljs-attr>y1</span>: path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>],
        <span class=hljs-attr>x2</span>: path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>],
        <span class=hljs-attr>y2</span>: path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>],
        <span class=hljs-attr>stroke</span>: <span class=hljs-string>&apos;#000&apos;</span>,
        <span class=hljs-attr>lineWidth</span>: <span class=hljs-number>1</span>,
      }
    });
    container.addShape(<span class=hljs-string>&apos;line&apos;</span>, {
      <span class=hljs-attr>attrs</span>: {
        <span class=hljs-attr>x1</span>: path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>],
        <span class=hljs-attr>y1</span>: path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>],
        <span class=hljs-attr>x2</span>: path[<span class=hljs-number>3</span>][<span class=hljs-number>1</span>],
        <span class=hljs-attr>y2</span>: path[<span class=hljs-number>3</span>][<span class=hljs-number>2</span>],
        <span class=hljs-attr>stroke</span>: <span class=hljs-string>&apos;#000&apos;</span>,
        <span class=hljs-attr>lineWidth</span>: <span class=hljs-number>1</span>,
      }
    });
    <span class=hljs-keyword>return</span> intervalShape;
  }
});
<span class=hljs-comment>// &#x5E95;&#x8FB9;&#x5E26;&#x5706;&#x89D2;</span>
Shape.registerShape(<span class=hljs-string>&apos;interval&apos;</span>, <span class=hljs-string>&apos;bottom&apos;</span>, {
  draw(cfg, container) {
    <span class=hljs-keyword>const</span> points = cfg.points;
    <span class=hljs-keyword>const</span> attrs = getFillAttrs(cfg);
    <span class=hljs-keyword>let</span> path = getRectPath(cfg.points);
    path = <span class=hljs-keyword>this</span>.parsePath(path);
    <span class=hljs-keyword>const</span> circleStartY = path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>] + (path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>]) / <span class=hljs-number>3</span>;
    <span class=hljs-keyword>const</span> h = path[<span class=hljs-number>0</span>][<span class=hljs-number>2</span>] - circleStartY;
    <span class=hljs-keyword>const</span> w = (path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>]) / <span class=hljs-number>2</span>;
    <span class=hljs-keyword>const</span> radius = (<span class=hljs-built_in>Math</span>.pow(w, <span class=hljs-number>2</span>) + <span class=hljs-built_in>Math</span>.pow(h, <span class=hljs-number>2</span>)) / (<span class=hljs-number>2</span> * h);
    <span class=hljs-keyword>const</span> temp1 = [];
    temp1.push([<span class=hljs-string>&apos;M&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>]]);
    temp1.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>], circleStartY]);
    temp1.push([<span class=hljs-string>&apos;A&apos;</span>, radius, radius, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, <span class=hljs-number>0</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>], circleStartY]);
    temp1.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>]]);
    <span class=hljs-keyword>const</span> temp2 = [];
    temp2.push([<span class=hljs-string>&apos;M&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>] + gapWidth, path[<span class=hljs-number>1</span>][<span class=hljs-number>2</span>]]);
    temp2.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>] + gapWidth, circleStartY + gapWidth]);
    temp2.push([<span class=hljs-string>&apos;A&apos;</span>, radius - gapWidth, radius - gapWidth, <span class=hljs-number>0</span>, <span class=hljs-number>1</span>, <span class=hljs-number>0</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - gapWidth, circleStartY + gapWidth]);
    temp2.push([<span class=hljs-string>&apos;L&apos;</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - gapWidth, path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>]]);
    container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: Util.mix({
        <span class=hljs-attr>path</span>: temp1,
        <span class=hljs-attr>stroke</span>: <span class=hljs-string>&apos;#000&apos;</span>,
        <span class=hljs-attr>lineWidth</span>: <span class=hljs-number>1</span>,
      })
    });
    <span class=hljs-keyword>return</span> container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: Util.mix(attrs, {
        <span class=hljs-attr>path</span>: temp2,
      })
    });
  }
});
<span class=hljs-keyword>const</span> colors = [<span class=hljs-string>&quot;#CECA9B&quot;</span>,<span class=hljs-string>&quot;#B1C753&quot;</span>,<span class=hljs-string>&quot;#3CA6DF&quot;</span>,<span class=hljs-string>&quot;#459E96&quot;</span>,<span class=hljs-string>&quot;#2E6936&quot;</span>,<span class=hljs-string>&quot;#52AD3B&quot;</span>,<span class=hljs-string>&quot;#90C320&quot;</span>,<span class=hljs-string>&quot;#F7B632&quot;</span>,<span class=hljs-string>&quot;#F39831&quot;</span>,<span class=hljs-string>&quot;#EA452F&quot;</span>];
<span class=hljs-keyword>const</span> data = [
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x4E2A;&#x4EBA;&#x5962;&#x4F88;&#x54C1;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>2490</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x8C6A;&#x534E;&#x8F66;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>4380</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x8C6A;&#x534E;&#x9152;&#x5E97;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>1830</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x4F18;&#x8D28;&#x8461;&#x8404;&#x9152;&#x548C;&#x70C8;&#x9152;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>660</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x4F18;&#x8D28;&#x98DF;&#x54C1;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>460</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x827A;&#x672F;&#x7CBE;&#x54C1;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>390</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x8BBE;&#x8BA1;&#x5E08;&#x5BB6;&#x5177;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>330</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x79C1;&#x4EBA;&#x98DE;&#x673A;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>180</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x6E38;&#x8247;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>70</span> },
  { <span class=hljs-attr>name</span>: <span class=hljs-string>&apos;&#x8C6A;&#x534E;&#x6E38;&#x8F6E;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>20</span> },
];
<span class=hljs-keyword>const</span> dv = <span class=hljs-keyword>new</span> <span class=hljs-built_in>DataView</span>(data);
dv.source(data)
  .transform({
    <span class=hljs-attr>type</span>: <span class=hljs-string>&apos;map&apos;</span>,
    callback(obj) {
      obj.type = <span class=hljs-string>&apos;1&apos;</span>;
      <span class=hljs-keyword>return</span> obj;
    }
  })
  .transform({
    <span class=hljs-attr>type</span>: <span class=hljs-string>&apos;sort-by&apos;</span>,
    <span class=hljs-attr>fields</span>: [ <span class=hljs-string>&apos;value&apos;</span> ]
  });
<span class=hljs-keyword>const</span> max = dv.max(<span class=hljs-string>&apos;value&apos;</span>);
<span class=hljs-keyword>const</span> min = dv.min(<span class=hljs-string>&apos;value&apos;</span>);

<span class=hljs-keyword>const</span> chart = <span class=hljs-keyword>new</span> G2.Chart({
  <span class=hljs-attr>container</span>: <span class=hljs-string>&apos;c3&apos;</span>,
  <span class=hljs-attr>width</span>: <span class=hljs-number>500</span>,
  <span class=hljs-attr>height</span>: <span class=hljs-number>450</span>,
  <span class=hljs-attr>padding</span>: [<span class=hljs-number>20</span>, <span class=hljs-number>150</span>, <span class=hljs-number>80</span>, <span class=hljs-number>80</span>]
});
chart.source(dv);
chart.axis(<span class=hljs-literal>false</span>);
chart.legend({
  <span class=hljs-attr>position</span>:<span class=hljs-string>&apos;right&apos;</span>,
  <span class=hljs-attr>clickable</span>: <span class=hljs-literal>false</span> <span class=hljs-comment>// &#x4E0D;&#x53EF;&#x70B9;&#x51FB;</span>
});
chart.tooltip({
  <span class=hljs-attr>showTitle</span>: <span class=hljs-literal>false</span>,
  <span class=hljs-attr>shared</span>: <span class=hljs-literal>false</span>,
  <span class=hljs-attr>inPlot</span>: <span class=hljs-literal>false</span>
});
chart.intervalStack()
  .position(<span class=hljs-string>&apos;type*value&apos;</span>)
  .color(<span class=hljs-string>&apos;name&apos;</span>, colors)
  .size(<span class=hljs-number>40</span>)
  .shape(<span class=hljs-string>&apos;name*value&apos;</span>, (name, val) =&gt; {
    <span class=hljs-keyword>const</span> value = val[<span class=hljs-number>1</span>] - val[<span class=hljs-number>0</span>];
    <span class=hljs-keyword>if</span> (value === min) {
      <span class=hljs-keyword>return</span> <span class=hljs-string>&apos;top&apos;</span>;
    } <span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span> (value === max) {
      <span class=hljs-keyword>return</span> <span class=hljs-string>&apos;bottom&apos;</span>;
    }
    <span class=hljs-keyword>return</span> <span class=hljs-string>&apos;other&apos;</span>;
  });
chart.render();
</pre></div><p>&#x6309;&#x7167;&#x5706;&#x89D2;&#x5806;&#x53E0;&#x67F1;&#x72B6;&#x56FE;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x7ED8;&#x5236;&#x66F4;&#x6709;&#x610F;&#x601D;&#x7684;&#xFF1A;&#x542B;&#x6709;&#x6E29;&#x5EA6;&#x8BA1;&#x9690;&#x55BB;&#x7684;&#x5806;&#x53E0;&#x67F1;&#x72B6;&#x56FE;&#x3002;&#x6E29;&#x5EA6;&#x8BA1;&#x7684;&#x5173;&#x952E;&#x70B9;&#x5728;&#x4E8E;&#x5E95;&#x90E8;&#x70E7;&#x676F;&#x72B6;&#x56FE;&#x5F62;&#x7684;&#x7ED8;&#x5236;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x7559;&#x767D;&#x3002;&#x5BF9;&#x4E8E;&#x7559;&#x767D;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x7B80;&#x5355;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5C06;&#x586B;&#x5145;&#x7684;&#x77E9;&#x5F62;&#x5DE6;&#x53F3;&#x7684; x &#x5750;&#x6807;&#x5206;&#x522B;&#x5F80;&#x5185;&#x7F29;&#x51E0;&#x4E2A;&#x50CF;&#x7D20;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5DE6;&#x53F3;&#x4E24;&#x8FB9;&#x7ED8;&#x5236;&#x4E24;&#x6761;&#x7EBF;&#x5373;&#x53EF;&#x3002; &#x800C;&#x5BF9;&#x4E8E;&#x5E95;&#x90E8;&#x70E7;&#x676F;&#xFF0C;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x6C42;&#x51FA;&#x5706;&#x7684;&#x534A;&#x5F84;&#xFF0C;&#x5176;&#x5B9E;&#x6309;&#x7167;&#x52FE;&#x80A1;&#x5B9A;&#x7406;&#x63A8;&#x5BFC;&#x4E0B;&#x5373;&#x53EF;&#xFF1A;</p><p><img src=https://gw.alipayobjects.com/zos/rmsportal/JPWGCsDMoBNpJUnUGpkf.png alt=image.png></p><h2 id=_&#x6700;&#x540E;&#xFF0C;&#x6781;&#x5750;&#x6807;&#x4E0B;&#x7684;&#x5706;&#x89D2;&#x77E9;&#x5F62;><a href=#_&#x6700;&#x540E;&#xFF0C;&#x6781;&#x5750;&#x6807;&#x4E0B;&#x7684;&#x5706;&#x89D2;&#x77E9;&#x5F62; class=anchor><span class="iconfont icon-link"></span></a>&#x6700;&#x540E;&#xFF0C;&#x6781;&#x5750;&#x6807;&#x4E0B;&#x7684;&#x5706;&#x89D2;&#x77E9;&#x5F62;</h2><div id=c4></div><div class=highlight><pre><span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>getRectPath</span>(<span class=hljs-params>points</span>) </span>{
  <span class=hljs-keyword>const</span> path = [];
  <span class=hljs-keyword>for</span> (<span class=hljs-keyword>let</span> i = <span class=hljs-number>0</span>; i &lt; points.length; i++) {
    <span class=hljs-keyword>const</span> point = points[i];
    <span class=hljs-keyword>if</span> (point) {
      <span class=hljs-keyword>const</span> action = i === <span class=hljs-number>0</span> ? <span class=hljs-string>&apos;M&apos;</span> : <span class=hljs-string>&apos;L&apos;</span>;
      path.push([ action, point.x, point.y ]);
    }
  }
  <span class=hljs-keyword>const</span> first = points[<span class=hljs-number>0</span>];
  path.push([ <span class=hljs-string>&apos;L&apos;</span>, first.x, first.y ]);
  path.push([ <span class=hljs-string>&apos;z&apos;</span> ]);
  <span class=hljs-keyword>return</span> path;
}
G2.Shape.registerShape(<span class=hljs-string>&apos;interval&apos;</span>, <span class=hljs-string>&apos;roundedRect&apos;</span>, {
  draw(cfg, container) {
    <span class=hljs-keyword>const</span> points = cfg.points;
    <span class=hljs-keyword>let</span> path = getRectPath(cfg.points);
    <span class=hljs-keyword>const</span> r = (path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>] - path[<span class=hljs-number>1</span>][<span class=hljs-number>1</span>]) / <span class=hljs-number>2</span>;
    path = <span class=hljs-keyword>this</span>.parsePath(path); <span class=hljs-comment>// &#x5C06; 0 - 1 &#x7684;&#x503C;&#x8F6C;&#x6362;&#x4E3A;&#x753B;&#x5E03;&#x5750;&#x6807;</span>
    <span class=hljs-keyword>const</span> temp = [];
    temp.push(path[<span class=hljs-number>0</span>]);
    temp.push(path[<span class=hljs-number>1</span>]);
    temp.push([ <span class=hljs-string>&apos;A&apos;</span>, r, r, <span class=hljs-number>1</span>, <span class=hljs-number>0</span>, <span class=hljs-number>0</span>, path[<span class=hljs-number>2</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>2</span>][<span class=hljs-number>2</span>] ]);
    temp.push(path[<span class=hljs-number>3</span>]);
    temp.push([ <span class=hljs-string>&apos;A&apos;</span>, r, r, <span class=hljs-number>1</span>, <span class=hljs-number>0</span>, <span class=hljs-number>0</span>, path[<span class=hljs-number>4</span>][<span class=hljs-number>1</span>], path[<span class=hljs-number>4</span>][<span class=hljs-number>2</span>] ]);
    <span class=hljs-keyword>return</span> container.addShape(<span class=hljs-string>&apos;path&apos;</span>, {
      <span class=hljs-attr>attrs</span>: {
        <span class=hljs-attr>path</span>: temp,
        <span class=hljs-attr>fill</span>: cfg.color,
        <span class=hljs-attr>fillOpacity</span>: cfg.opacity,
      }
    });
  }
});
<span class=hljs-keyword>const</span> data = [
  { <span class=hljs-attr>cate</span>: <span class=hljs-string>&apos;&#x6D3B;&#x52A8;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>100</span> },
  { <span class=hljs-attr>cate</span>: <span class=hljs-string>&apos;&#x953B;&#x70BC;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>100</span> },
  { <span class=hljs-attr>cate</span>: <span class=hljs-string>&apos;&#x7AD9;&#x7ACB;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>100</span> }
];
<span class=hljs-keyword>const</span> userData = [
  { <span class=hljs-attr>type</span>: <span class=hljs-string>&apos;&#x6D3B;&#x52A8;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>60</span> },
  { <span class=hljs-attr>type</span>: <span class=hljs-string>&apos;&#x953B;&#x70BC;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>100</span> },
  { <span class=hljs-attr>type</span>: <span class=hljs-string>&apos;&#x7AD9;&#x7ACB;&apos;</span>, <span class=hljs-attr>value</span>: <span class=hljs-number>150</span> }
];
<span class=hljs-keyword>const</span> chart = <span class=hljs-keyword>new</span> G2.Chart({
  <span class=hljs-attr>id</span>: <span class=hljs-string>&apos;c4&apos;</span>,
  <span class=hljs-attr>width</span>: <span class=hljs-number>400</span>,
  <span class=hljs-attr>height</span>: <span class=hljs-number>400</span>,
  <span class=hljs-attr>padding</span>: <span class=hljs-number>50</span>
});
chart.coord(<span class=hljs-string>&apos;polar&apos;</span>, {
  <span class=hljs-attr>innerRadius</span>: <span class=hljs-number>0.25</span>,
}).transpose();
chart.legend(<span class=hljs-string>&apos;cate&apos;</span>, <span class=hljs-literal>false</span>);

<span class=hljs-keyword>const</span> view = chart.view();
view.source(data);
view.tooltip(<span class=hljs-literal>false</span>);
view.interval()
  .position(<span class=hljs-string>&apos;cate*value&apos;</span>)
  .color(<span class=hljs-string>&apos;cate&apos;</span>, [ <span class=hljs-string>&apos;#003732&apos;</span>, <span class=hljs-string>&apos;#183800&apos;</span>, <span class=hljs-string>&apos;#37000a&apos;</span> ])
  .opacity(<span class=hljs-number>0.8</span>)
  .size(<span class=hljs-number>33</span>);
<span class=hljs-keyword>const</span> userView = chart.view();
userView.source(userData, {
  <span class=hljs-attr>value</span>: {
    <span class=hljs-attr>max</span>: <span class=hljs-number>200</span>,
  }
});
userView.interval()
  .position(<span class=hljs-string>&apos;type*value&apos;</span>)
  .color(<span class=hljs-string>&apos;type&apos;</span>, [ <span class=hljs-string>&apos;#00fff1&apos;</span>, <span class=hljs-string>&apos;#c1ff00&apos;</span>, <span class=hljs-string>&apos;#ff0078&apos;</span>])
  .opacity(<span class=hljs-number>0.7</span>)
  .size(<span class=hljs-number>33</span>)
  .shape(<span class=hljs-string>&apos;roundedRect&apos;</span>);
chart.render();
</pre></div><p>&#x4F7F;&#x7528;&#x591A; view &#x548C;&#x81EA;&#x5B9A;&#x4E49; shape, &#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x6A21;&#x4EFF;&#x82F9;&#x679C;&#x7684;&#x5065;&#x8EAB;&#x8BB0;&#x5F55;&#x56FE;&#x8868;&#xFF0C;&#x7ED8;&#x5236;&#x4E00;&#x4E2A;&#x5706;&#x89D2;&#x7389;&#x73CF;&#x56FE;&#x3002;</p></article><div class=toc-container><div class=toc></div></div></div></div><footer class="navbar navbar-expand-lg bg-dark"><div class=container><div class=navbar-collapse id=navbarFooter><ul class="navbar-nav mr-auto mt-2 mt-lg-0"><li class=nav-item><a class=declaration href=https://weibo.com/antv2017><span class="iconfont icon-sinaweibo"></span></a></li><li class=nav-item><a class=declaration href=https://github.com/antvis/ ><span class="iconfont icon-github"></span></a></li><li class=nav-item><a class=declaration href=/zh-cn/about.html>&#x5173;&#x4E8E;&#x6211;&#x4EEC;</a></li></ul><a class=declaration href=https://docs.alipay.com/policies/privacy/antfin>&#x9690;&#x79C1;&#x6743;&#x653F;&#x7B56;</a> <span>|</span> <a class=declaration href=https://render.alipay.com/p/f/fd-izto3cem/index.html>&#x6743;&#x76CA;&#x4FDD;&#x969C;&#x627F;&#x8BFA;&#x4E66;</a> <span>ICP &#x8BC1;&#x6D59; B2-2-100257 Copyright &#xA9; &#x8682;&#x8681;&#x91D1;&#x878D;&#x670D;&#x52A1;&#x96C6;&#x56E2;</span></div></div></footer><script type=text/javascript>/* eslint-disable */
window.__meta = {"currentProduct":"vis","assets":"/assets","dist":"/assets/dist/3.0.0","href":"/zh-cn/vis/blog/make-rounded-column-chart.html","locale":"zh-cn","version":"3.0.0"};</script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/lodash-4.17.4.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/jquery-3.2.1.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/jquery.autocomplete-1.4.3.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/jquery.visible-1.2.0.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/popper.js-1.12.5/umd/popper.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/bootstrap-4.0.0-beta/bootstrap.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/lazyload-2.0.0-beta.2.min.js></script><div id=___tracers style=display:none;><script async src="https://s11.cnzz.com/z_stat.php?id=1259109662&amp;web_id=1259109662"></script><script>!function(t,e,a,r,c){
            t.TracertCmdCache=t.TracertCmdCache||[]; t[c]=window[c]|| { _isInit:!0, call:function(){t.TracertCmdCache.push(arguments)}, start:function(t){this.call('start',t)}}; t[c].l=new Date; var n=e.createElement(a),s=e.getElementsByTagName(a)[0]; n.async=!0; n.src=r; s.parentNode.insertBefore(n,s);
        }(window,document,'script','https://tracert.alipay.com/tracert.js','Tracert');
        Tracert.start({ plugins: [ 'BucName' ], spmAPos: 'a369', spmBPos: 'b3976', });</script></div><script type=text/javascript src=https://gw.alipayobjects.com/os/antv/assets/g2/3.0.9/g2.min.js></script><script type=text/javascript src=https://gw.alipayobjects.com/os/antv/assets/data-set/0.8.7/data-set.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/jquery.headroom-0.9.4.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/clipboard-1.7.1.min.js></script><script src=https://gw.alipayobjects.com/os/antv/assets/lib/tocbot-3.0.2/tocbot.min.js></script><script src=/assets/dist/3.0.0/blog.js></script><script type=text/javascript src=/assets/dist/3.0.0/common.js></script><script>(function(){
'use strict';
//  shape, 
G2.Shape.registerShape('interval', 'borderRadius', {
  draw(cfg, container) {
    const points = cfg.points;
    let path = [];
    path.push(['M', points[0].x, points[0].y]);
    path.push(['L', points[1].x, points[1].y]);
    path.push(['L', points[2].x, points[2].y]);
    path.push(['L', points[3].x, points[3].y]);
    path.push('Z');
    path = this.parsePath(path); //  0 - 1 
    return container.addShape('rect', {
      attrs: {
        x: path[1][1], // 
        y: path[1][2],
        width: path[2][1] - path[1][1],
        height: path[0][2] - path[1][2],
        fill: cfg.color,
        radius: (path[2][1] - path[1][1]) / 2,
      }
    });
  }
});
const activeData = [
  { date: '201732', actual: 175, expected: 900 },
  { date: '201733', actual: 137, expected: 900 },
  { date: '201734', actual: 240, expected: 900 },
  { date: '201735', actual: 726, expected: 900 },
  { date: '201736', actual: 968, expected: 900 },
  { date: '201737', actual: 702, expected: 900 },
  { date: '201738', actual: 655, expected: 900 },
  { date: '201739', actual: 463, expected: 900 },
  { date: '2017310', actual: 464, expected: 900 },
  { date: '2017312', actual: 0, expected: 900 },
  { date: '2017313', actual: 638, expected: 900 },
  { date: '2017314', actual: 0, expected: 900 },
  { date: '2017315', actual: 0, expected: 900 },
  { date: '2017316', actual: 509, expected: 900 },
  { date: '2017317', actual: 269, expected: 900 },
  { date: '2017318', actual: 321, expected: 900 },
  { date: '2017319', actual: 0, expected: 900 },
  { date: '2017320', actual: 399, expected: 900 },
  { date: '2017321', actual: 662, expected: 900 },
  { date: '2017322', actual: 689, expected: 900 },
  { date: '2017323', actual: 347, expected: 900 },
  { date: '2017324', actual: 0, expected: 900 },
  { date: '2017326', actual: 428, expected: 900 },
  { date: '2017327', actual: 749, expected: 900 },
  { date: '2017328', actual: 0, expected: 900 },
  { date: '2017329', actual: 0, expected: 900 },
  { date: '2017330', actual: 69.1, expected: 900 },
];
const chart = new G2.Chart({
  container: 'c1',
  forceFit: true,
  height: 250,
  padding: [50, 80]
});
chart.source(activeData, {
  expected: {
    ticks: [0, 900, 1200]
  }
});
chart.axis('date', false);
chart.axis('actual', false);
chart.axis('expected', {
  line: null,
  tickLine: null,
  position: 'right',
  label: {
    formatter: function(val) {
      if (val === '1200') {
        return '';
      }
      return val;
    }
  }
});
chart.legend(false);
chart.interval()
  .position('date*expected')
  .color('#752136')
  .shape('borderRadius')
  .tooltip('expected')
  .opacity(0.6);
chart.interval()
  .position('date*actual')
  .color('#db0d2d')
  .tooltip('actual')
  .shape('date*actual', function(date, val) {
    if (val === 0) {
      return;
    } else {
      return 'borderRadius';
    }
  });
chart.guide().text({
  position: [ 'min', 'max'],
  content: '',
  style: {
    fill: '#ff2c55',
    fontSize: 20,
    fontWeight: 'bold',
    textBaseline: 'top'
  }
});
chart.guide().text({
  position: [ 'max', 'max'],
  content: '67 / 900 ',
  style: {
    fill: '#cbcbcb',
    fontSize: 20,
    textAlign: 'end',
    textBaseline: 'top'
  }
});
chart.render();

})();</script><script>(function(){
'use strict';
      const { Chart, Shape, Util } = G2;
      function getFillAttrs(cfg) {
        const attrs = Util.mix({
          fill: cfg.color,
          fillOpacity: cfg.opacity
        }, cfg.style);
        return attrs;
      }
      function getRectPath(points) {
        const path = [];
        for (let i = 0; i < points.length; i++) {
          const point = points[i];
          if (point) {
            const action = i === 0 ? 'M' : 'L';
            path.push([action, point.x, point.y]);
          }
        }
        const first = points[0];
        path.push(['L', first.x, first.y]);
        path.push(['z']);
        return path;
      }
      // 
      Shape.registerShape('interval', 'top', {
        draw(cfg, container) {
          const points = cfg.points;
          const attrs = getFillAttrs(cfg);
          let path = getRectPath(cfg.points);
          path = this.parsePath(path); //  0 - 1 
          const radius = (path[2][1] - path[1][1]) / 2;
          const temp = [];
          temp.push(['M', path[0][1], path[0][2]]);
          temp.push(['L', path[1][1], path[1][2] + radius]);
          temp.push(['A', radius, radius, 90, 0, 1, path[1][1] + radius, path[1][2]]);
          temp.push(['L', path[2][1] - radius, path[2][2]]);
          temp.push(['A', radius, radius, 90, 0, 1, path[2][1], path[2][2] + radius]);
          temp.push(['L', path[3][1], path[3][2]]);
          temp.push(['Z']);
          return container.addShape('path', {
            attrs: Util.mix(attrs, {
              path: temp,
            })
          });
        }
      });
      // 
      Shape.registerShape('interval', 'bottom', {
        draw(cfg, container) {
          const points = cfg.points;
          const attrs = getFillAttrs(cfg);
          let path = getRectPath(cfg.points);
          path = this.parsePath(path);
          const radius = (path[2][1] - path[1][1]) / 2;
          const temp = [];
          temp.push(['M', path[0][1] + radius, path[0][2]]);
          temp.push(['A', radius, radius, 90, 0, 1, path[0][1], path[0][2] - radius]);
          temp.push(['L', path[1][1], path[1][2]]);
          temp.push(['L', path[2][1], path[2][2]]);
          temp.push(['L', path[3][1], path[3][2] - radius]);
          temp.push(['A', radius, radius, 90, 0, 1, path[3][1] - radius, path[3][2]]);
          temp.push(['Z']);
          return container.addShape('path', {
            attrs: Util.mix(attrs, {
              path: temp,
            })
          });
        }
      });
      const data = [
        {year: '2014', type: 'Sales', sales: 1000},
        {year: '2015', type: 'Sales', sales: 1170},
        {year: '2016', type: 'Sales', sales: 660},
        {year: '2017', type: 'Sales', sales: 1030},
        {year: '2014', type: 'Expenses', sales: 400},
        {year: '2015', type: 'Expenses', sales: 460},
        {year: '2016', type: 'Expenses', sales: 1120},
        {year: '2017', type: 'Expenses', sales: 540},
        {year: '2014', type: 'Profit', sales: 300},
        {year: '2015', type: 'Profit', sales: 300},
        {year: '2016', type: 'Profit', sales: 300},
        {year: '2017', type: 'Profit', sales: 350}
      ];
      const chart = new Chart({
        container: 'c2',
        forceFit: true,
        height: 350,
        padding: [20, 80, 80, 80]
      });
      chart.source(data, {
        sales: {
          max: 2400,
          tickInterval: 600
        }
      });
      const axisCfg = {
        label: {
          textStyle: {
            fontFamily: 'Monospace',
            fontWeight: 700,
            fontSize: 14,
            fill: '#545454'
          }
        },
        grid: {
          lineStyle: {
            lineDash: [0, 0],
            stroke: '#545454'
          }
        }
      };
      chart.axis('year', axisCfg);
      chart.axis('sales', Util.mix({}, axisCfg, {
        line: null
      }));

      chart.intervalStack()
        .position('year*sales')
        .color('type')
        .size(35)
        .shape('type', function(val) {
          if (val === 'Profit') { // 
            return 'bottom';
          } else if (val === 'Sales') { // 
            return 'top';
          } else {
            return; // 
          }
        })
        .style({
          stroke: '#545454',
          lineWidth: 2
        });
      chart.render();

})();</script><script>(function(){
'use strict';
const { Chart, Shape, Util } = G2;
const { DataView } = DataSet;
const gapWidth = 3;
function getFillAttrs(cfg) {
  const attrs = {
    fill: cfg.color,
    fillOpacity: cfg.opacity,
  };
  return attrs;
}
function getRectPath(points) {
  const path = [];
  for (let i = 0; i < points.length; i++) {
    const point = points[i];
    if (point) {
      const action = i === 0 ? 'M' : 'L';
      path.push([action, point.x, point.y]);
    }
  }
  const first = points[0];
  path.push(['L', first.x, first.y]);
  path.push(['z']);
  return path;
}
Shape.registerShape('interval', 'top', {
  draw(cfg, container) {
    const points = cfg.points;
    const attrs = getFillAttrs(cfg);
    let path = getRectPath(cfg.points);
    path = this.parsePath(path); //  0 - 1 
    const realInterval = container.addShape('path', {
      attrs: Util.mix(attrs, {
        path,
      }),
    });
    const radius = (path[2][1] - path[1][1]) / 2;
    const temp = [];
    temp.push(['M', path[1][1], path[1][2]]);
    temp.push(['A', radius, radius, 90, 0, 1, (path[2][1] + path[1][1]) / 2, path[2][2] - radius]);
    temp.push(['A', radius, radius, 90, 0, 1, path[2][1], path[2][2]]);
    temp.push(['L', path[2][1], path[2][2]]);
    const topShape = container.addShape('path', {
      attrs: {
        path: temp,
        fill: '#fff',
        stroke: '#000',
      },
    });
    return realInterval;
  }
});
// 
Shape.registerShape('interval', 'other', {
  draw(cfg, container) {
    const points = cfg.points;
    const attrs = getFillAttrs(cfg);
    let path = getRectPath(cfg.points);
    path = this.parsePath(path); //  0 - 1 
    const intervalPath = [];
    intervalPath.push(['M', path[0][1] + gapWidth, path[0][2]]);
    intervalPath.push(['L', path[1][1] + gapWidth, path[1][2]]);
    intervalPath.push(['L', path[2][1] - gapWidth, path[2][2]]);
    intervalPath.push(['L', path[3][1] - gapWidth, path[3][2]]);
    intervalPath.push(['Z']);
    const intervalShape = container.addShape('path', {
      attrs: Util.mix(attrs, {
        path: intervalPath,
      }),
    });
    container.addShape('line', {
      attrs: {
        x1: path[0][1],
        y1: path[0][2],
        x2: path[1][1],
        y2: path[2][2],
        stroke: '#000',
        lineWidth: 1,
      }
    });
    container.addShape('line', {
      attrs: {
        x1: path[2][1],
        y1: path[2][2],
        x2: path[3][1],
        y2: path[3][2],
        stroke: '#000',
        lineWidth: 1,
      }
    });
    return intervalShape;
  }
});
// 
Shape.registerShape('interval', 'bottom', {
  draw(cfg, container) {
    const points = cfg.points;
    const attrs = getFillAttrs(cfg);
    let path = getRectPath(cfg.points);
    path = this.parsePath(path);
    const circleStartY = path[1][2] + (path[0][2] - path[1][2]) / 3;
    const h = path[0][2] - circleStartY;
    const w = (path[2][1] - path[1][1]) / 2;
    const radius = (Math.pow(w, 2) + Math.pow(h, 2)) / (2 * h);
    const temp1 = [];
    temp1.push(['M', path[1][1], path[1][2]]);
    temp1.push(['L', path[1][1], circleStartY]);
    temp1.push(['A', radius, radius, 0, 1, 0, path[2][1], circleStartY]);
    temp1.push(['L', path[2][1], path[2][2]]);
    const temp2 = [];
    temp2.push(['M', path[1][1] + gapWidth, path[1][2]]);
    temp2.push(['L', path[1][1] + gapWidth, circleStartY + gapWidth]);
    temp2.push(['A', radius - gapWidth, radius - gapWidth, 0, 1, 0, path[2][1] - gapWidth, circleStartY + gapWidth]);
    temp2.push(['L', path[2][1] - gapWidth, path[2][2]]);
    container.addShape('path', {
      attrs: Util.mix({
        path: temp1,
        stroke: '#000',
        lineWidth: 1,
      })
    });
    return container.addShape('path', {
      attrs: Util.mix(attrs, {
        path: temp2,
      })
    });
  }
});
const colors = ["#CECA9B","#B1C753","#3CA6DF","#459E96","#2E6936","#52AD3B","#90C320","#F7B632","#F39831","#EA452F"];
const data = [
  { name: '', value: 2490 },
  { name: '', value: 4380 },
  { name: '', value: 1830 },
  { name: '', value: 660 },
  { name: '', value: 460 },
  { name: '', value: 390 },
  { name: '', value: 330 },
  { name: '', value: 180 },
  { name: '', value: 70 },
  { name: '', value: 20 },
];
const dv = new DataView(data);
dv.source(data)
  .transform({
    type: 'map',
    callback(obj) {
      obj.type = '1';
      return obj;
    }
  })
  .transform({
    type: 'sort-by',
    fields: [ 'value' ]
  });
const max = dv.max('value');
const min = dv.min('value');

const chart = new G2.Chart({
  container: 'c3',
  width: 500,
  height: 450,
  padding: [20, 150, 80, 80]
});
chart.source(dv);
chart.axis(false);
chart.legend({
  position:'right',
  clickable: false // 
});
chart.tooltip({
  showTitle: false,
  shared: false,
  inPlot: false
});
chart.intervalStack()
  .position('type*value')
  .color('name', colors)
  .size(40)
  .shape('name*value', (name, val) => {
    const value = val[1] - val[0];
    if (value === min) {
      return 'top';
    } else if (value === max) {
      return 'bottom';
    }
    return 'other';
  });
chart.render();

})();</script><script>(function(){
'use strict';
function getRectPath(points) {
  const path = [];
  for (let i = 0; i < points.length; i++) {
    const point = points[i];
    if (point) {
      const action = i === 0 ? 'M' : 'L';
      path.push([ action, point.x, point.y ]);
    }
  }
  const first = points[0];
  path.push([ 'L', first.x, first.y ]);
  path.push([ 'z' ]);
  return path;
}
G2.Shape.registerShape('interval', 'roundedRect', {
  draw(cfg, container) {
    const points = cfg.points;
    let path = getRectPath(cfg.points);
    const r = (path[2][1] - path[1][1]) / 2;
    path = this.parsePath(path); //  0 - 1 
    const temp = [];
    temp.push(path[0]);
    temp.push(path[1]);
    temp.push([ 'A', r, r, 1, 0, 0, path[2][1], path[2][2] ]);
    temp.push(path[3]);
    temp.push([ 'A', r, r, 1, 0, 0, path[4][1], path[4][2] ]);
    return container.addShape('path', {
      attrs: {
        path: temp,
        fill: cfg.color,
        fillOpacity: cfg.opacity,
      }
    });
  }
});
const data = [
  { cate: '', value: 100 },
  { cate: '', value: 100 },
  { cate: '', value: 100 }
];
const userData = [
  { type: '', value: 60 },
  { type: '', value: 100 },
  { type: '', value: 150 }
];
const chart = new G2.Chart({
  id: 'c4',
  width: 400,
  height: 400,
  padding: 50
});
chart.coord('polar', {
  innerRadius: 0.25,
}).transpose();
chart.legend('cate', false);

const view = chart.view();
view.source(data);
view.tooltip(false);
view.interval()
  .position('cate*value')
  .color('cate', [ '#003732', '#183800', '#37000a' ])
  .opacity(0.8)
  .size(33);
const userView = chart.view();
userView.source(userData, {
  value: {
    max: 200,
  }
});
userView.interval()
  .position('type*value')
  .color('type', [ '#00fff1', '#c1ff00', '#ff0078'])
  .opacity(0.7)
  .size(33)
  .shape('roundedRect');
chart.render();

})();</script></body></html>