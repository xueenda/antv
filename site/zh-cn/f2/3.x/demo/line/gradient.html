<!--
index: 4
title: 某国女性结婚年龄走势
-->

<script>
  // 使用 html5 canvas api 创建渐变色对象
  const canvas = document.getElementById('mountNode');
  const ctx = canvas.getContext('2d');
  const gradient = ctx.createLinearGradient(0, 0, window.innerWidth, 0);
  gradient.addColorStop(0., '#F2C587');
  gradient.addColorStop(0.5, '#ED7973');
  gradient.addColorStop(1, '#8659AF');

  const data = [
    { year: 2000, age: 27.2 },
    { year: 2001, age: 27.5 },
    { year: 2002, age: 27.8 },
    { year: 2003, age: 28 },
    { year: 2004, age: 28.2 },
    { year: 2005, age: 28.4 },
    { year: 2006, age: 28.8 },
    { year: 2007, age: 28.8 },
    { year: 2008, age: 28.8 },
    { year: 2009, age: 28.8 },
    { year: 2010, age: 28.9 },
    { year: 2011, age: 29 },
    { year: 2012, age: 29.3 },
    { year: 2013, age: 29.4 },
    { year: 2014, age: 29.5 },
    { year: 2015, age: 29.7 },
    { year: 2016, age: 30 },
    { year: 2017, age: 30.12 }
  ];
  const chart = new F2.Chart({
    id: 'mountNode',
    width: window.innerWidth,
    height: window.innerWidth,
    pixelRatio: window.devicePixelRatio
  });
  const defs = {
    year: {
      range: [ 0, 1 ],
      max: 2020
    },
    age: {
      tickCount: 5
    }
  };
  chart.axis('year', {
    label(text, index, total) {
      const cfg = {
        textAlign: 'center'
      };
      if (index === 0) {
        cfg.textAlign = 'start';
      }
      if (index > 0 && index === total - 1) {
        cfg.textAlign = 'end';
      }
      return cfg;
    }
  });
  chart.source(data, defs);
  chart.tooltip({
    showCrosshairs: true
  });
  chart.guide().tag({
    position: [ 2017, 30.12 ],
    content: '30.12',
    direct: 'tl',
    offsetY: -5,
    background: {
      fill: '#8659AF'
    },
    pointStyle: {
      fill: '#8659AF'
    }
  });
  chart.line().position('year*age')
    .shape('smooth')
    .color(gradient);
  chart.area().position('year*age')
    .shape('smooth')
    .color(gradient);
  chart.render();
</script>
