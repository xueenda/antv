<!--
index: 9
title: 自定义图例
resource:
  jsFiles:
    - ${url.jquery}
-->

<script>

  function customizeMarker(x, y, r, ctx) {
    ctx.lineWidth = 2;
    ctx.strokeStyle = ctx.fillStyle;
    ctx.moveTo(x - r - 4, y);
    ctx.lineTo(x + r + 4, y);
    ctx.stroke();
    ctx.arc(x, y, r + 1, 0, Math.PI * 2, false);
    ctx.fill();
  }

  const data = [
    { time: '2016-08-08 00:00:00', tem: 10, city: 'Peking' },
    { time: '2016-08-08 00:10:00', tem: 22, city: 'Peking' },
    { time: '2016-08-08 00:30:00', tem: 16, city: 'Peking' },
    { time: '2016-08-09 00:35:00', tem: 26, city: 'Peking' },
    { time: '2016-08-09 01:00:00', tem: 12, city: 'Peking' },
    { time: '2016-08-09 01:20:00', tem: 26, city: 'Peking' },
    { time: '2016-08-10 01:40:00', tem: 18, city: 'Peking' },
    { time: '2016-08-10 02:00:00', tem: 26, city: 'Peking' },
    { time: '2016-08-10 02:20:00', tem: 12, city: 'Peking' },
    { time: '2016-08-08 00:00:00', tem: 4, city: 'Hangzhou' },
    { time: '2016-08-08 00:10:00', tem: 3, city: 'Hangzhou' },
    { time: '2016-08-08 00:30:00', tem: 6, city: 'Hangzhou' },
    { time: '2016-08-09 00:35:00', tem: -12, city: 'Hangzhou' },
    { time: '2016-08-09 01:00:00', tem: 1, city: 'Hangzhou' },
    { time: '2016-08-09 01:20:00', tem: 9, city: 'Hangzhou' },
    { time: '2016-08-10 01:40:00', tem: 13, city: 'Hangzhou' },
    { time: '2016-08-10 02:00:00', tem: -3, city: 'Hangzhou' },
    { time: '2016-08-10 02:20:00', tem: 11, city: 'Hangzhou' }
  ];
  const chart = new F2.Chart({
    id: 'mountNode',
    width: window.innerWidth,
    height: window.innerWidth * 0.707,
    pixelRatio: window.devicePixelRatio
  });
  chart.source(data, {
    time: {
      type: 'timeCat',
      tickCount: 3,
      mask: 'hh:mm',
      range: [ 0, 1 ]
    },
    tem: {
      tickCount: 3,
      formatter(item) {
        return item + '%';
      }
    }
  });

  const colors = {
    Peking: '#8E77ED',
    Hangzhou: '#1890FF'
  };

  chart.line().position('time*tem')
    .color('city', function(city) {
      return colors[city];
    });
  chart.point().position('time*tem')
    .color('city', function(city) {
      return colors[city];
    })
    .style({
      stroke: '#fff',
      lineWidth: 1
    });
  chart.legend({
    custom: true,
    align: 'right',
    itemWidth: null,
    wordSpace: 8,
    items: [
      { name: 'Peking', marker: customizeMarker, fill: colors.Peking },
      { name: 'Hangzhou', marker: customizeMarker, fill: colors.Hangzhou }
    ]
  });

  chart.render();
</script>
